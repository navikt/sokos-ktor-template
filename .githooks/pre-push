#!/bin/bash

# Get the name of the branch being pushed
branch_name=$(git symbolic-ref HEAD 2>/dev/null | cut -d"/" -f 3-)

# Define valid branch prefixes
valid_prefixes=("feature/" "bugfix/" "hotfix/" "chore/" "docs/")

# Check if the branch name starts with any of the valid prefixes
is_valid=false
for prefix in "${valid_prefixes[@]}"; do
  if [[ $branch_name == $prefix* ]]; then
    is_valid=true
    break
  fi
done

# If the branch name is not valid, prevent the push and display a message
if [ "$is_valid" = false ]; then
  echo "Error: Invalid branch name '$branch_name'."
  echo "Valid branch name prefixes are:"
  for prefix in "${valid_prefixes[@]}"; do
    echo "  - $prefix"
  done
  exit 1
fi
